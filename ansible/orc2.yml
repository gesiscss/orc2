- name: Update NGINX configuration
  hosts: notebooks_gesis_org
  become: true
  tasks:
    - name: Copy static files
      ansible.builtin.copy:
        src: ../nginx/static/
        dest: /var/www/
        owner: root
        group: root
        mode: u=rw,g=r,o=r
    - name: Copy configuration files
      ansible.builtin.copy:
        src: ../nginx/sites-available/
        dest: /etc/nginx/sites-available/
        owner: root
        group: root
        mode: u=rw,g=r,o=r
    - name: Create a symbolic link
      ansible.builtin.file:
        src: /etc/nginx/sites-available/orc2
        dest: /etc/nginx/sites-enabled/orc2
        state: link
    - name: Restart server
      ansible.builtin.shell: systemctl restart nginx.service